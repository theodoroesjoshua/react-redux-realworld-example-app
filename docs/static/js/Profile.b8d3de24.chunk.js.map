{"version":3,"file":"static/js/Profile.b8d3de24.chunk.js","mappings":"6PAsBA,SAASA,IACP,OACE,UAAC,KAAD,CACEC,GAAG,YACHC,UAAU,8CAFZ,WAIE,cAAGA,UAAU,eAJf,4BAkBJ,SAASC,EAAT,GAAoD,IAK9CC,EALsBC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,UAC9BC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAcC,EAAAA,EAAAA,IAAYC,EAAAA,IAC5BC,EAAU,wBAGVR,GACFQ,GAAW,iBACXV,EAAW,mBAAeC,KAE1BS,GAAW,yBACXV,EAAW,iBAAaC,IAgB1B,OACE,oBAAQH,UAAWY,EAASC,QAdV,WACbJ,EAMHF,EADEH,GACOU,EAAAA,EAAAA,IAASX,IAETY,EAAAA,EAAAA,IAAOZ,IAPhBE,EAASW,KAAT,+BAAsCC,SAASC,YAYjD,WACE,cAAGlB,UAAU,mBADf,OAGGE,KAoBP,SAASiB,EAAT,GAAgC,IAAZC,EAAW,EAAXA,QACZX,GAAcC,EAAAA,EAAAA,IAAYC,EAAAA,IAC1BU,EAAgBD,EAAQjB,YAAR,OAAqBM,QAArB,IAAqBA,OAArB,EAAqBA,EAAaN,UAExD,OACE,gBAAKH,UAAU,YAAf,UACE,gBAAKA,UAAU,YAAf,UACE,gBAAKA,UAAU,MAAf,UACE,iBAAKA,UAAU,kCAAf,WACE,gBACEsB,IACEF,EAAQG,OACR,4DAEFvB,UAAU,WACVwB,IAAKJ,EAAQjB,YAEf,wBAAKiB,EAAQjB,YACb,uBAAIiB,EAAQK,MAEXJ,GACC,SAACvB,EAAD,KAEA,SAACG,EAAD,CACEE,SAAUiB,EAAQjB,SAClBC,UAAWgB,EAAQhB,qBAmBnC,SAASsB,EAAT,GAAiD,IAA1BvB,EAAyB,EAAzBA,SAAUwB,EAAe,EAAfA,YAC/B,OACE,gBAAK3B,UAAU,kBAAf,UACE,gBAAIA,UAAU,+BAAd,WACE,eAAIA,UAAU,WAAd,UACE,SAAC,KAAD,CACEA,UAAW2B,EAAc,WAAa,kBACtC5B,GAAE,WAAMI,GAFV,4BAQF,eAAIH,UAAU,WAAd,UACE,SAAC,KAAD,CACEA,UAAW2B,EAAc,kBAAoB,WAC7C5B,GAAE,WAAMI,EAAN,cAFJ,uCAkBV,SAASyB,EAAT,GAA+C,EAA5BX,SAA6B,IAAnBY,EAAkB,EAAlBA,eACrBtB,GAAWC,EAAAA,EAAAA,MACXY,GAAUV,EAAAA,EAAAA,KAAY,SAACoB,GAAD,OAAWA,EAAMV,WACrCjB,GAAa4B,EAAAA,EAAAA,MAAb5B,SAkBR,OAhBA6B,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAe1B,GAAS2B,EAAAA,EAAAA,IAAW/B,IACnCgC,EAAgB5B,EACpBsB,GACIO,EAAAA,EAAAA,IAAoB,CAAEjC,SAAAA,KACtBkC,EAAAA,EAAAA,IAAoB,CAAEC,OAAQnC,KAGpC,OAAO,WACL8B,EAAaM,QACbJ,EAAcI,WAEf,CAACpC,EAAU0B,KAEdG,EAAAA,EAAAA,YAAU,kBAAM,kBAAMzB,GAASiC,EAAAA,EAAAA,UAAwB,IAElDpB,GAKH,iBAAKpB,UAAU,eAAf,WACE,SAACmB,EAAD,CAAUC,QAASA,KAEnB,gBAAKpB,UAAU,iBAAf,UACE,gBAAKA,UAAU,MAAf,UACE,iBAAKA,UAAU,kCAAf,WACE,SAAC0B,EAAD,CACEvB,SAAUiB,EAAQjB,SAClBwB,YAAaE,KAGf,SAAC,IAAD,cAfD,KAuBX,WAAeY,EAAAA,EAAAA,MAAKb","sources":["components/Profile.js"],"sourcesContent":["import React, { memo, useEffect } from 'react';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ArticleList from './ArticleList';\nimport {\n  getArticlesByAuthor,\n  getFavoriteArticles,\n} from '../reducers/articleList';\nimport {\n  follow,\n  unfollow,\n  getProfile,\n  profilePageUnloaded,\n} from '../reducers/profile';\nimport { selectUser } from '../features/auth/authSlice';\n\n/**\n * Go to profile settings\n *\n * @example\n * <EditProfileSettings />\n */\nfunction EditProfileSettings() {\n  return (\n    <Link\n      to=\"/settings\"\n      className=\"btn btn-sm btn-outline-secondary action-btn\"\n    >\n      <i className=\"ion-gear-a\" /> Edit Profile Settings\n    </Link>\n  );\n}\n\n/**\n * Follow or unfollow an user\n *\n * @param {Object} props\n * @param {String} props.username\n * @param {Boolean} props.following\n * @example\n * <FollowUserButton username=\"warren_boyd\" following />\n */\nfunction FollowUserButton({ username, following }) {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const currentUser = useSelector(selectUser);\n  let classes = 'btn btn-sm action-btn';\n  let textMessage;\n\n  if (following) {\n    classes += ' btn-secondary';\n    textMessage = `Unfollow ${username}`;\n  } else {\n    classes += ' btn-outline-secondary';\n    textMessage = `Follow ${username}`;\n  }\n\n  const handleClick = () => {\n    if (!currentUser) {\n      navigate.push(`/register?redirectTo=${location.pathname}`);\n      return;\n    }\n\n    if (following) {\n      dispatch(unfollow(username));\n    } else {\n      dispatch(follow(username));\n    }\n  };\n\n  return (\n    <button className={classes} onClick={handleClick}>\n      <i className=\"ion-plus-round\" />\n      &nbsp;\n      {textMessage}\n    </button>\n  );\n}\n\n/**\n * Show the profile of an user\n *\n * @param {Object} props\n * @param {Object} props.profile\n * @example\n * <UserInfo profile={{\n *      username: 'warren_boyd',\n *      email: 'warren.boyd@mailinator.com',\n *      image: 'https://static.productionready.io/images/smiley-cyrus.jpg',\n *      bio: null,\n *      following: false,\n *    }}\n * />\n */\nfunction UserInfo({ profile }) {\n  const currentUser = useSelector(selectUser);\n  const isCurrentUser = profile.username === currentUser?.username;\n\n  return (\n    <div className=\"user-info\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-xs-12 col-md-10 offset-md-1\">\n            <img\n              src={\n                profile.image ||\n                'https://static.productionready.io/images/smiley-cyrus.jpg'\n              }\n              className=\"user-img\"\n              alt={profile.username}\n            />\n            <h4>{profile.username}</h4>\n            <p>{profile.bio}</p>\n\n            {isCurrentUser ? (\n              <EditProfileSettings />\n            ) : (\n              <FollowUserButton\n                username={profile.username}\n                following={profile.following}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * Profile's navigation\n *\n * @param {Object}  props\n * @param {String}  props.username\n * @param {Boolean} props.isFavorites\n * @example\n * <ProfileTabs username=\"warren_boyd\" isFavorites />\n */\nfunction ProfileTabs({ username, isFavorites }) {\n  return (\n    <div className=\"articles-toggle\">\n      <ul className=\"nav nav-pills outline-active\">\n        <li className=\"nav-item\">\n          <Link\n            className={isFavorites ? 'nav-link' : 'nav-link active'}\n            to={`/${username}`}\n          >\n            My Articles\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link\n            className={isFavorites ? 'nav-link active' : 'nav-link'}\n            to={`/${username}/favorites`}\n          >\n            Favorited Articles\n          </Link>\n        </li>\n      </ul>\n    </div>\n  );\n}\n\n/**\n * Profile screen component\n * @param {import('react-router-dom').RouteComponentProps<{ username: string }>} props\n * @example\n * <Profile />\n */\nfunction Profile({ location, isFavoritePage }) {\n  const dispatch = useDispatch();\n  const profile = useSelector((state) => state.profile);\n  const { username } = useParams();\n\n  useEffect(() => {\n    const fetchProfile = dispatch(getProfile(username));\n    const fetchArticles = dispatch(\n      isFavoritePage\n        ? getFavoriteArticles({ username })\n        : getArticlesByAuthor({ author: username })\n    );\n\n    return () => {\n      fetchProfile.abort();\n      fetchArticles.abort();\n    };\n  }, [username, isFavoritePage]);\n\n  useEffect(() => () => dispatch(profilePageUnloaded()), []);\n\n  if (!profile) {\n    return null;\n  }\n\n  return (\n    <div className=\"profile-page\">\n      <UserInfo profile={profile} />\n\n      <div className=\"container page\">\n        <div className=\"row\">\n          <div className=\"col-xs-12 col-md-10 offset-md-1\">\n            <ProfileTabs\n              username={profile.username}\n              isFavorites={isFavoritePage}\n            />\n\n            <ArticleList />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Profile);\n"],"names":["EditProfileSettings","to","className","FollowUserButton","textMessage","username","following","navigate","useNavigate","dispatch","useDispatch","currentUser","useSelector","selectUser","classes","onClick","unfollow","follow","push","location","pathname","UserInfo","profile","isCurrentUser","src","image","alt","bio","ProfileTabs","isFavorites","Profile","isFavoritePage","state","useParams","useEffect","fetchProfile","getProfile","fetchArticles","getFavoriteArticles","getArticlesByAuthor","author","abort","profilePageUnloaded","memo"],"sourceRoot":""}